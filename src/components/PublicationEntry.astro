---
import type { Entry as BibEntry } from "@retorquere/bibtex-parser";
import Config from "data/config.yaml"

const { entry } = Astro.props as { entry: BibEntry };

function isMe(author: { firstName?: string; lastName?: string }) {
  return author.firstName === Config.name.first && author.lastName === Config.name.last;
}

---

<article class="publication">
  <div class="publication-title">{entry.fields.title}</div>
  <div class="publication-author">
    {entry.fields.author?.map((author) => (
      <div class:list={[
        isMe(author) ? "font-bold" : null,
      ]}>{author.firstName} {author.lastName}</div>
    ))}
  </div>
  <div class="publication-link">
    {entry.type === "misc" ? (
      <span>Preprint</span>
    ) : null}
    {entry.fields.archiveprefix ? (
      <a
        class="btn-icon"
        href={`https://arxiv.org/abs/${entry.fields.eprint}`}
        target="_blank"
        rel="noopener noreferrer"
        title="arXiv"
      >
        <div class="i-custom:arxiv"></div>
      </a>
    ) : null}
  </div>
</article>

<style>
.publication {
  display: flex;
  flex-direction: column;
}

.publication-title {
  @apply text-emph;
  font-weight: bold;
  line-height: 1.25rem;
  font-family: var(--font-serif);
  padding-bottom: 0.125rem;
}

.publication > *:not(.publication-title) {
  font-size: 0.875rem;
  line-height: 1.25rem;
}

.publication-author {
  display: flex;
  gap: 0.25rem;
  font-family: var(--font-sans);
}

.publication-author > *:not(:last-child)::after {
  content: ",";
}

.publication-link {
  display: flex;
  gap: 0.25rem;
  align-items: center;
  font-family: var(--font-sans);
}

.publication-link .btn-icon {
  font-size: 1.125rem;
}
</style>